<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MetaMapa - Dashboard Administrador</title>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Base CSS Variables */
    :root {
      --primary-color: #0891b2;
      --primary-hover: #0e7490;
      --secondary-color: #f59e0b;
      --text-color: #4b5563;
      --text-light: #6b7280;
      --background: #ffffff;
      --surface: #f9fafb;
      --border: #e5e7eb;
      --shadow: 0 4px 6px rgba(0,0,0,0.05);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
    }
    
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }
    
    body { 
      font-family: 'DM Sans', sans-serif; 
      background: var(--surface); 
      color: var(--text-color);
      line-height: 1.6;
    }

    /* Navigation */
    nav {
      background: var(--background);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0; 
      z-index: 100;
      box-shadow: var(--shadow);
    }
    
    .nav-container {
      max-width: 1200px; 
      margin: auto; 
      padding: 1rem 2rem;
      display: flex; 
      justify-content: space-between; 
      align-items: center;
    }
    
    .logo { 
      display: flex; 
      align-items: center; 
      gap: 0.5rem; 
      color: var(--primary-color); 
      font-weight: 700; 
      font-size: 1.5rem; 
      text-decoration: none; 
    }
    
    .nav-links { 
      display: flex; 
      gap: 2rem; 
    }
    
    .nav-links a {
      text-decoration: none; 
      padding: 0.5rem 1rem; 
      border-radius: 0.5rem;
      color: var(--text-color); 
      font-weight: 500;
      transition: all 0.2s ease;
    }
    
    .nav-links a:hover,
    .nav-links a.active { 
      background: var(--primary-color); 
      color: white; 
    }

    /* Dashboard Styles */
    .dashboard-section {
      background: var(--surface);
      padding: 3rem 2rem;
      min-height: calc(100vh - 80px);
    }

    .dashboard-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .dashboard-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .dashboard-header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 0.5rem;
    }

    .dashboard-header p {
      font-size: 1.2rem;
      color: var(--text-light);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Stats Cards */
    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .stat-card {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: var(--shadow);
      text-align: center;
      border: 1px solid var(--border);
      transition: transform 0.2s ease;
    }

    .stat-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .stat-card .icon {
      width: 60px;
      height: 60px;
      background: var(--primary-color);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      color: white;
    }

    .stat-card h3 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 0.5rem;
    }

    .stat-card p {
      color: var(--text-light);
      font-size: 1rem;
      font-weight: 500;
    }

    /* Requests Container */
    .requests-container {
      background: white;
      border-radius: 1rem;
      box-shadow: var(--shadow);
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .requests-header {
      background: var(--primary-color);
      color: white;
      padding: 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .requests-header h2 {
      font-size: 1.5rem;
      font-weight: 600;
      margin: 0;
    }

    /* Filter Tabs */
    .filter-tabs {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .filter-tab {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
      font-size: 0.9rem;
    }

    .filter-tab.active {
      background: white;
      color: var(--primary-color);
    }

    .filter-tab:hover:not(.active) {
      background: rgba(255,255,255,0.3);
    }

    /* Request Items */
    .request-item {
      border-bottom: 1px solid var(--border);
      padding: 2rem;
      transition: background 0.2s ease;
    }

    .request-item:last-child {
      border-bottom: none;
    }

    .request-item:hover {
      background: var(--surface);
    }

    .request-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1rem;
      gap: 1rem;
    }

    .request-info h4 {
      color: var(--text-color);
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      line-height: 1.4;
    }

    .request-meta {
      display: flex;
      gap: 1.5rem;
      font-size: 0.9rem;
      color: var(--text-light);
      margin-bottom: 0.5rem;
      flex-wrap: wrap;
    }

    .request-meta span {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .request-meta i {
      width: 16px;
      height: 16px;
    }

    /* Status Badges */
    .status-badge {
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      white-space: nowrap;
    }

    .status-pending {
      background: #fef3c7;
      color: #92400e;
    }

    .status-approved {
      background: #d1fae5;
      color: #065f46;
    }

    .status-rejected {
      background: #fee2e2;
      color: #991b1b;
    }

    /* Request Reason */
    .request-reason {
      background: var(--surface);
      padding: 1.5rem;
      border-radius: 0.75rem;
      border-left: 4px solid var(--primary-color);
      margin: 1.5rem 0;
      font-style: italic;
      color: var(--text-color);
      line-height: 1.6;
    }

    /* Action Buttons */
    .request-actions {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }

    .btn-small {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 0.5rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-approve {
      background: #10b981;
      color: white;
    }

    .btn-approve:hover {
      background: #059669;
    }

    .btn-reject {
      background: #ef4444;
      color: white;
    }

    .btn-reject:hover {
      background: #dc2626;
    }

    .btn-view {
      background: var(--primary-color);
      color: white;
    }

    .btn-view:hover {
      background: var(--primary-hover);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: var(--text-light);
    }

    .empty-state i {
      font-size: 4rem;
      margin-bottom: 1.5rem;
      opacity: 0.5;
    }

    .empty-state h3 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .empty-state p {
      font-size: 1.1rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .dashboard-section {
        padding: 2rem 1rem;
      }

      .dashboard-header h1 {
        font-size: 2rem;
      }

      .dashboard-stats {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .stat-card {
        padding: 1.5rem;
      }

      .requests-header {
        flex-direction: column;
        align-items: stretch;
        text-align: center;
      }

      .filter-tabs {
        justify-content: center;
      }

      .request-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .request-meta {
        flex-direction: column;
        gap: 0.5rem;
      }

      .request-actions {
        flex-direction: column;
      }

      .nav-links {
        display: none;
      }
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-container">
      <a href="index-administrador.html" class="logo">
        <i data-lucide="map"></i> 
        MetaMapa
      </a>
      <div class="nav-links">
        <a href="index.html">Contribuyente</a>
        <a href="admin-dashboard.html" class="active">Administrador</a>
        <a href="#explorar">Explorar</a>
        <a href="login.html">Salir</a>
      </div>
    </div>
  </nav>

  <div class="dashboard-section">
    <div class="dashboard-container">
      <div class="dashboard-header">
        <h1>Dashboard de Solicitudes</h1>
        <p>Gestión centralizada de solicitudes de eliminación de hechos y moderación de contenido</p>
      </div>

      <!-- Dashboard Stats -->
      <div class="dashboard-stats">
        <div class="stat-card">
          <div class="icon">
            <i data-lucide="clock"></i>
          </div>
          <h3 id="pendingCount">8</h3>
          <p>Solicitudes Pendientes</p>
        </div>
        <div class="stat-card">
          <div class="icon">
            <i data-lucide="check-circle"></i>
          </div>
          <h3 id="approvedCount">24</h3>
          <p>Solicitudes Aprobadas</p>
        </div>
        <div class="stat-card">
          <div class="icon">
            <i data-lucide="x-circle"></i>
          </div>
          <h3 id="rejectedCount">12</h3>
          <p>Solicitudes Rechazadas</p>
        </div>
        <div class="stat-card">
          <div class="icon">
            <i data-lucide="database"></i>
          </div>
          <h3 id="totalFacts">1,247</h3>
          <p>Total de Hechos</p>
        </div>
      </div>

      <!-- Requests Container -->
      <div class="requests-container">
        <div class="requests-header">
          <h2>Solicitudes de Eliminación</h2>
          <div class="filter-tabs">
            <button class="filter-tab active" onclick="filterRequests('all')">Todas</button>
            <button class="filter-tab" onclick="filterRequests('pending')">Pendientes</button>
            <button class="filter-tab" onclick="filterRequests('approved')">Aprobadas</button>
            <button class="filter-tab" onclick="filterRequests('rejected')">Rechazadas</button>
          </div>
        </div>

        <div id="requestsList">
          <!-- Solicitud Pendiente 1 -->
          <div class="request-item" data-status="pending">
            <div class="request-header">
              <div class="request-info">
                <h4>Incendio forestal en Córdoba - Datos inexactos</h4>
                <div class="request-meta">
                  <span><i data-lucide="calendar"></i> 15 Ago 2025</span>
                  <span><i data-lucide="map-pin"></i> Córdoba, Argentina</span>
                  <span><i data-lucide="user"></i> Usuario Anónimo</span>
                </div>
              </div>
              <span class="status-badge status-pending">Pendiente</span>
            </div>
            
            <div class="request-reason">
              "Los datos presentados sobre el incendio forestal en la provincia de Córdoba contienen información errónea sobre las hectáreas afectadas y la fecha del incidente. Según los registros oficiales del Servicio Nacional de Manejo del Fuego, el incendio reportado como ocurrido el 10 de agosto en realidad tuvo lugar el 8 de agosto, y las hectáreas afectadas fueron 1,200 y no 2,400 como se indica en el hecho publicado. Esta información incorrecta puede generar confusión en la comunidad y afectar las decisiones de prevención. Adjunto documentación oficial que respalda mi solicitud de corrección o eliminación del registro."
            </div>

            <div class="request-actions">
              <button class="btn-small btn-view" onclick="viewFactDetails('001')">
                <i data-lucide="eye"></i> Ver Hecho
              </button>
              <button class="btn-small btn-approve" onclick="approveRequest('001')">
                <i data-lucide="check"></i> Aprobar
              </button>
              <button class="btn-small btn-reject" onclick="rejectRequest('001')">
                <i data-lucide="x"></i> Rechazar
              </button>
            </div>
          </div>

          <!-- Solicitud Pendiente 2 -->
          <div class="request-item" data-status="pending">
            <div class="request-header">
              <div class="request-info">
                <h4>Accidente vial en Buenos Aires - Información personal expuesta</h4>
                <div class="request-meta">
                  <span><i data-lucide="calendar"></i> 18 Ago 2025</span>
                  <span><i data-lucide="map-pin"></i> Buenos Aires, Argentina</span>
                  <span><i data-lucide="user"></i> María González</span>
                </div>
              </div>
              <span class="status-badge status-pending">Pendiente</span>
            </div>
            
            <div class="request-reason">
              "El hecho publicado sobre el accidente vial ocurrido en la Av. Corrientes incluye datos personales míos que no deberían ser públicos, incluyendo mi número de DNI completo y dirección particular. Esta información fue obtenida sin mi consentimiento y viola mi derecho a la privacidad. Además, algunos detalles del accidente están distorsionados y pueden afectar procesos legales en curso. Solicito la eliminación completa del registro o, al menos, la anonimización de todos los datos personales identificables. He intentado contactar previamente con la organización sin obtener respuesta. Esta situación me genera considerable angustia y preocupación por mi seguridad personal y la de mi familia."
            </div>

            <div class="request-actions">
              <button class="btn-small btn-view" onclick="viewFactDetails('002')">
                <i data-lucide="eye"></i> Ver Hecho
              </button>
              <button class="btn-small btn-approve" onclick="approveRequest('002')">
                <i data-lucide="check"></i> Aprobar
              </button>
              <button class="btn-small btn-reject" onclick="rejectRequest('002')">
                <i data-lucide="x"></i> Rechazar
              </button>
            </div>
          </div>

          <!-- Solicitud Pendiente 3 -->
          <div class="request-item" data-status="pending">
            <div class="request-header">
              <div class="request-info">
                <h4>Deslizamiento de tierra en Perú - Datos desactualizados</h4>
                <div class="request-meta">
                  <span><i data-lucide="calendar"></i> 20 Ago 2025</span>
                  <span><i data-lucide="map-pin"></i> Lima, Perú</span>
                  <span><i data-lucide="user"></i> Carlos Mendoza</span>
                </div>
              </div>
              <span class="status-badge status-pending">Pendiente</span>
            </div>
            
            <div class="request-reason">
              "El registro del deslizamiento de tierra en la zona de Villa El Salvador contiene información desactualizada que ya no refleja la situación actual. Los datos de víctimas y daños materiales han sido actualizados por las autoridades locales y el Ministerio de Vivienda, pero el hecho sigue mostrando cifras preliminares que generan alarma innecesaria en la población. Solicito que se actualice la información con los datos oficiales más recientes o se elimine el registro hasta que se pueda corregir adecuadamente."
            </div>

            <div class="request-actions">
              <button class="btn-small btn-view" onclick="viewFactDetails('003')">
                <i data-lucide="eye"></i> Ver Hecho
              </button>
              <button class="btn-small btn-approve" onclick="approveRequest('003')">
                <i data-lucide="check"></i> Aprobar
              </button>
              <button class="btn-small btn-reject" onclick="rejectRequest('003')">
                <i data-lucide="x"></i> Rechazar
              </button>
            </div>
          </div>

          <!-- Solicitud Aprobada -->
          <div class="request-item" data-status="approved" style="display: none;">
            <div class="request-header">
              <div class="request-info">
                <h4>Manifestación política - Datos sesgados</h4>
                <div class="request-meta">
                  <span><i data-lucide="calendar"></i> 12 Ago 2025</span>
                  <span><i data-lucide="map-pin"></i> Santiago, Chile</span>
                  <span><i data-lucide="user"></i> Ana Rodríguez</span>
                </div>
              </div>
              <span class="status-badge status-approved">Aprobada</span>
            </div>
            
            <div class="request-reason">
              "El registro de la manifestación del 10 de agosto presenta información sesgada y no objetiva sobre los participantes y las demandas. Se utilizan términos despectivos y se tergiversan las consignas principales del evento."
            </div>

            <div class="request-actions">
              <button class="btn-small btn-view" onclick="viewFactDetails('004')">
                <i data-lucide="eye"></i> Ver Hecho Eliminado
              </button>
            </div>
          </div>

          <!-- Solicitud Rechazada -->
          <div class="request-item" data-status="rejected" style="display: none;">
            <div class="request-header">
              <div class="request-info">
                <h4>Concierto en parque público - Molestia personal</h4>
                <div class="request-meta">
                  <span><i data-lucide="calendar"></i> 10 Ago 2025</span>
                  <span><i data-lucide="map-pin"></i> Bogotá, Colombia</span>
                  <span><i data-lucide="user"></i> Roberto Díaz</span>
                </div>
              </div>
              <span class="status-badge status-rejected">Rechazada</span>
            </div>
            
            <div class="request-reason">
              "Solicito la eliminación del registro del concierto porque el ruido me molestó y no me parece apropiado que se documente este tipo de eventos en espacios públicos."
            </div>

            <div class="request-actions">
              <button class="btn-small btn-view" onclick="viewFactDetails('005')">
                <i data-lucide="eye"></i> Ver Hecho
              </button>
            </div>
          </div>
        </div>

        <!-- Empty State (initially hidden) -->
        <div id="emptyState" class="empty-state" style="display: none;">
          <i data-lucide="inbox"></i>
          <h3>No hay solicitudes</h3>
          <p>No se encontraron solicitudes que coincidan con el filtro seleccionado.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Filter functionality
    function filterRequests(status) {
      const items = document.querySelectorAll('.request-item');
      const tabs = document.querySelectorAll('.filter-tab');
      const emptyState = document.getElementById('emptyState');
      
      // Update active tab
      tabs.forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');
      
      let visibleCount = 0;
      
      items.forEach(item => {
        const itemStatus = item.dataset.status;
        if (status === 'all' || itemStatus === status) {
          item.style.display = 'block';
          visibleCount++;
        } else {
          item.style.display = 'none';
        }
      });
      
      // Show/hide empty state
      if (visibleCount === 0) {
        emptyState.style.display = 'block';
      } else {
        emptyState.style.display = 'none';
      }
    }

    // Action functions
    function viewFactDetails(id) {
      alert(`Abriendo detalles del hecho ID: ${id}`);
      // Aquí iría la lógica para abrir el modal o navegar a la página de detalles
    }

    function approveRequest(id) {
      if (confirm('¿Estás seguro de que deseas aprobar esta solicitud de eliminación?')) {
        alert(`Solicitud ${id} aprobada. El hecho será eliminado.`);
        // Aquí iría la lógica para aprobar la solicitud
        updateStats();
      }
    }

    function rejectRequest(id) {
      const reason = prompt('Ingresa la razón del rechazo (opcional):');
      if (reason !== null) {
        alert(`Solicitud ${id} rechazada. Razón: ${reason || 'No especificada'}`);
        // Aquí iría la lógica para rechazar la solicitud
        updateStats();
      }
    }

    function updateStats() {
      // Aquí se actualizarían las estadísticas desde el backend
      // Por ahora solo simularemos el cambio
      const pendingCount = document.getElementById('pendingCount');
      const currentCount = parseInt(pendingCount.textContent);
      if (currentCount > 0) {
        pendingCount.textContent = currentCount - 1;
      }
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', function() {
      lucide.createIcons();
    });
  </script>
</body>
</html>